#!/usr/bin/env bash

mkdir -p $HOME/.npm/

test -t 1 && USE_TTY="--tty"

docker run \
    --rm \
    ${USE_TTY} \
    --interactive \
    --init \
    --user ${UID}:${UID} \
    --volume /etc/passwd:/etc/passwd:ro \
    --volume /etc/group:/etc/group:ro \
    --volume $HOME:$HOME \
    -e npm_config_cache=/tmp/.npm \
    --volume ${HOME}/.npm:/tmp/.npm \
    --volume $(pwd):/app \
    --workdir /app \
    --network host \
    node:10-alpine npm "$@"
